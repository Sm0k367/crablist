<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DJ SMOKE // EVENT HORIZON</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Syncopate:wght@700&family=Space+Grotesk:wght@300;700&display=swap');

        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; color: #fff; font-family: 'Space Grotesk', sans-serif; }
        
        #canvas-container { position: fixed; top: 0; left: 0; z-index: 1; }

        /* HUD Overlay */
        #hud {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 40px;
            box-sizing: border-box;
            background: radial-gradient(circle, transparent 20%, rgba(0,0,0,0.4) 100%);
        }

        header { pointer-events: auto; }
        h1 { font-family: 'Syncopate', sans-serif; font-size: 3rem; margin: 0; letter-spacing: 10px; background: linear-gradient(to right, #8b5cf6, #06b6d4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .status-line { color: #06b6d4; font-size: 0.7rem; letter-spacing: 5px; text-transform: uppercase; margin-top: 10px; }

        .controls { pointer-events: auto; background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 20px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); width: fit-content; }
        .instruction { font-size: 0.8rem; color: #64748b; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 2px; }

        /* Active Player */
        #player-dock {
            position: absolute;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            width: 400px;
            z-index: 20;
            display: none;
            pointer-events: auto;
            background: rgba(10, 10, 20, 0.9);
            border: 1px solid #8b5cf6;
            border-radius: 30px;
            padding: 20px;
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.3);
        }

        iframe { border: none; width: 100%; height: 300px; border-radius: 20px; }
        .close-btn { color: #ff00ff; cursor: pointer; float: right; font-weight: bold; }

        .search-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid #8b5cf6;
            color: white;
            font-size: 1.5rem;
            width: 300px;
            outline: none;
            font-family: 'Space Grotesk';
        }
    </style>
</head>
<body>

<div id="canvas-container"></div>

<div id="hud">
    <header>
        <div class="status-line">Quantum Stream Initialized // 2026</div>
        <h1>DJ SMOKE</h1>
        <div id="track-info" style="font-size: 1.5rem; margin-top: 20px; color: #f97316;">SCROLL TO NAVIGATE VAULT</div>
    </header>

    <div id="player-dock">
        <span class="close-btn" onclick="closePlayer()">[X] CLOSE</span>
        <h3 id="current-t">Track Name</h3>
        <div id="iframe-target"></div>
    </div>

    <div class="controls">
        <div class="instruction">Search the Node Map</div>
        <input type="text" class="search-input" id="search" placeholder="TRACK NAME..." oninput="handleSearch(this.value)">
    </div>
</div>

<script>
    // --- TRACK DATA ---
    const rawTracks = [
        { title:"One Night Only", id:"daff476d-0b5d-4f71-97a2-cc2b85fb7f3c", cat:"fire" },
        { title:"The OS of Funk", id:"", cat:"fire" },
        { title:"Moonshot Blues", id:"9984da17-19f8-4524-b63d-4b2b9e43c5f7", cat:"fire" },
        { title:"Lounge", id:"", cat:"vibe" },
        { title:"The Devil's Summer", id:"acfb57ed-982f-42ae-90c7-71640a891362", cat:"fire" },
        { title:"Countdown", id:"e10b411d-6169-42c2-8097-90924043940c", cat:"fire" },
        { title:"Back For It", id:"10242707-d00a-4cae-9470-a88f7625e53f", cat:"vibe" },
        { title:"Neon Drifting", id:"eda69867-6359-4f52-8a8d-b403fc26e6ba", cat:"smoke" },
        { title:"Vibe Check", id:"2d5066ca-9f23-492c-826b-86e9cc7ff8d3", cat:"dj" }
    ];
    // Scale to 116 tracks for the "1000x" effect
    const tracks = Array.from({ length: 116 }, (_, i) => ({
        ...rawTracks[i % rawTracks.length],
        displayTitle: rawTracks[i % rawTracks.length].title + " Node " + (i + 1)
    }));

    // --- THREE.JS LOGIC ---
    let scene, camera, renderer, starField, group;
    const items = [];
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();

    function init() {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 5000);
        camera.position.z = 15;

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // Nebula Background
        const starGeo = new THREE.BufferGeometry();
        const starPos = [];
        for(let i=0; i<20000; i++) starPos.push((Math.random()-0.5)*3000, (Math.random()-0.5)*3000, (Math.random()-0.5)*3000);
        starGeo.setAttribute('position', new THREE.Float32BufferAttribute(starPos, 3));
        starField = new THREE.Points(starGeo, new THREE.PointsMaterial({color: 0x8b5cf6, size: 1.5, transparent: true, opacity: 0.5}));
        scene.add(starField);

        // Track Group (Cylindrical Layout)
        group = new THREE.Group();
        const radius = 12;
        tracks.forEach((t, i) => {
            const angle = (i / tracks.length) * Math.PI * 2;
            const y = (i - tracks.length/2) * 1.5;
            
            const geometry = new THREE.BoxGeometry(4, 0.8, 0.1);
            const material = new THREE.MeshPhongMaterial({ 
                color: t.id ? 0x06b6d4 : 0x333333, 
                transparent: true, 
                opacity: 0.8,
                shininess: 100
            });
            const mesh = new THREE.Mesh(geometry, material);
            
            mesh.position.set(Math.cos(angle) * radius, y, Math.sin(angle) * radius);
            mesh.lookAt(0, y, 0);
            mesh.userData = { ...t, index: i };
            
            group.add(mesh);
            items.push(mesh);
        });
        scene.add(group);

        const light = new THREE.PointLight(0xffffff, 1, 100);
        light.position.set(0, 10, 10);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040));

        animate();
    }

    function animate() {
        requestAnimationFrame(animate);
        starField.rotation.y += 0.0005;
        renderer.render(scene, camera);
    }

    // --- INTERACTION ---
    window.addEventListener('wheel', (e) => {
        gsap.to(group.position, { y: group.position.y + (e.deltaY * 0.05), duration: 0.5 });
        gsap.to(group.rotation, { y: group.rotation.y + (e.deltaY * 0.002), duration: 0.5 });
    });

    window.addEventListener('click', (e) => {
        mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
        raycaster.setFromCamera(mouse, camera);
        const intersects = raycaster.intersectObjects(items);
        
        if (intersects.length > 0) {
            const data = intersects[0].object.userData;
            playTrack(data);
            
            // Visual feedback
            gsap.to(intersects[0].object.scale, { x: 1.5, y: 1.5, z: 1.5, duration: 0.2, yoyo: true, repeat: 1 });
        }
    });

    function playTrack(data) {
        document.getElementById('track-info').innerText = `SELECTED: ${data.displayTitle}`;
        const dock = document.getElementById('player-dock');
        const target = document.getElementById('iframe-target');
        document.getElementById('current-t').innerText = data.displayTitle;
        
        if (data.id) {
            target.innerHTML = `<iframe src="https://suno.com/embed/${data.id}?autoplay=1" allow="autoplay"></iframe>`;
            dock.style.display = 'block';
        } else {
            target.innerHTML = `<div style="padding:20px; text-align:center;">NODE ENCRYPTED<br><br><a href="https://suno.com/@dj_smoke_stream" target="_blank" style="color:#06b6d4">DECRYPT ON SUNO</a></div>`;
            dock.style.display = 'block';
        }
    }

    function closePlayer() {
        document.getElementById('player-dock').style.display = 'none';
        document.getElementById('iframe-target').innerHTML = '';
    }

    function handleSearch(query) {
        items.forEach(mesh => {
            const match = mesh.userData.title.toLowerCase().includes(query.toLowerCase());
            gsap.to(mesh.material, { opacity: match ? 0.8 : 0.1, duration: 0.3 });
            if(match && query !== "") {
                gsap.to(group.position, { y: -mesh.position.y, duration: 1 });
            }
        });
    }

    window.onresize = () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    };

    init();
</script>
</body>
</html>
